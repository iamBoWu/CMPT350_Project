{"ast":null,"code":"import _defineProperty from \"/Users/wubo/WebstormProjects/project/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/wubo/WebstormProjects/project/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/wubo/WebstormProjects/project/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/wubo/WebstormProjects/project/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/wubo/WebstormProjects/project/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/wubo/WebstormProjects/project/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/wubo/WebstormProjects/project/src/Navbar/Login.js\";\nimport React from 'react';\nimport './Login.css';\nimport './Signup.css';\nimport axios from 'axios';\nimport qs from 'qs';\nimport Home from './Home';\n\nvar Signup =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Signup, _React$Component);\n\n  function Signup() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Signup);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Signup)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {//message: null\n    };\n\n    _this.handleChange = function (e) {\n      _this.setState(_defineProperty({}, e.target.id, e.target.value));\n    };\n\n    _this.handleSubmit = function (event) {\n      event.preventDefault();\n      var url = \"http://localhost:8080/auth/login\";\n      axios.post(url, qs.stringify(_this.state), {\n        withCredentials: true\n      }).then(function (res) {\n        return res.data ? _this.setCookie(\"user\", res.data.username) : _this.setState({\n          message: \"wrong password\"\n        });\n      }).then(console.log(_this.getCookie(\"user\"))).then(_this.getCookie(\"user\") ? _this.props.history.push(\"/\") : {}).catch(function (error) {\n        alert(\"WRONG\");\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Signup, [{\n    key: \"setCookie\",\n    value: function setCookie(key, value) {\n      var d = new Date();\n      d.setTime(d.getTime() + 30 * 24 * 60 * 60 * 1000);\n      var expires = \"expires=\" + d.toGMTString();\n      document.cookie = key + \"=\" + value + \"; \" + expires;\n    } // handleSubmit = event => {\n    //   event.preventDefault();\n    //\n    //   let url = \"http://localhost:8080/auth/login\";\n    //   axios.post(url, qs.stringify(this.state))\n    //       .then(res=>\n    //           res.data.username ? console.log(res.data)\n    //                   // this.setCookie(\"profile\", res.data)\n    //               :\n    //           this.setState({\n    //           message: \"wrong password\"\n    //       }\n    //   ))\n    //\n    //       // .then(res=> console.log(this.state.message[0].lastName))\n    // .catch(function (error) {\n    //   alert(\"WRONG\")\n    // });\n    // }\n\n  }, {\n    key: \"getCookie\",\n    value: function getCookie(key) {\n      var name = key + \"=\";\n      var ca = document.cookie.split(';');\n\n      for (var i = 0; i < ca.length; i++) {\n        var c = ca[i].trim();\n\n        if (c.indexOf(name) === 0) {\n          return c.substring(name.length, c.length);\n        }\n      }\n\n      return \"\";\n    }\n  }, {\n    key: \"render\",\n    // googleLogin(){\n    //     axios.get(\"http://localhost:8080/auth/google\",{withCredentials:true})\n    //         .then(res=>this.setCookie(\"user\", res.data.username))\n    //         .then(this.props.history.push(\"/\"))\n    // }\n    value: function render() {\n      var _React$createElement, _React$createElement2;\n\n      return React.createElement(\"body\", {\n        className: \"text-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        className: \"form-signin\",\n        onSubmit: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        style: {\n          backgroundColor: \"red\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, this.state.message), React.createElement(\"h1\", {\n        className: \"h3 mb-3 font-weight-normal\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }, \"Please sign in with Email or Username\"), React.createElement(\"label\", {\n        htmlFor: \"inputUsername\",\n        className: \"sr-only\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, \"Username\"), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }), React.createElement(\"input\", (_React$createElement = {\n        type: \"text\",\n        id: \"inputUsername\"\n      }, _defineProperty(_React$createElement, \"id\", \"username\"), _defineProperty(_React$createElement, \"className\", \"form-control\"), _defineProperty(_React$createElement, \"placeholder\", \"Username\"), _defineProperty(_React$createElement, \"onChange\", this.handleChange), _defineProperty(_React$createElement, \"__source\", {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      }), _defineProperty(_React$createElement, \"__self\", this), _React$createElement)), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }), React.createElement(\"label\", {\n        htmlFor: \"inputPassword\",\n        className: \"sr-only\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, \"Password\"), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }), React.createElement(\"input\", (_React$createElement2 = {\n        type: \"password\",\n        id: \"inputPassword\"\n      }, _defineProperty(_React$createElement2, \"id\", \"password\"), _defineProperty(_React$createElement2, \"className\", \"form-control\"), _defineProperty(_React$createElement2, \"placeholder\", \"Password\"), _defineProperty(_React$createElement2, \"onChange\", this.handleChange), _defineProperty(_React$createElement2, \"required\", true), _defineProperty(_React$createElement2, \"__source\", {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      }), _defineProperty(_React$createElement2, \"__self\", this), _React$createElement2)), React.createElement(\"div\", {\n        className: \"checkbox mb-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      })), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }), React.createElement(\"a\", {\n        href: \"http://localhost:3000/\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }, \"  \", React.createElement(\"button\", {\n        className: \"btn btn-lg btn-primary btn-block\",\n        type: \"submit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }, \"Sign in\")), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }), React.createElement(\"a\", {\n        href: \"http://localhost:8080/auth/google\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, \"Login with your google account\"), React.createElement(\"p\", {\n        className: \"mt-5 mb-3 text-muted\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, \"\\xA9 2019-9012\")));\n    }\n  }]);\n\n  return Signup;\n}(React.Component);\n\nexport default Signup;","map":{"version":3,"sources":["/Users/wubo/WebstormProjects/project/src/Navbar/Login.js"],"names":["React","axios","qs","Home","Signup","state","handleChange","e","setState","target","id","value","handleSubmit","event","preventDefault","url","post","stringify","withCredentials","then","res","data","setCookie","username","message","console","log","getCookie","props","history","push","catch","error","alert","key","d","Date","setTime","getTime","expires","toGMTString","document","cookie","name","ca","split","i","length","c","trim","indexOf","substring","backgroundColor","Component"],"mappings":"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","sourcesContent":["\nimport React from 'react'\nimport './Login.css'\nimport './Signup.css'\nimport axios from 'axios'\nimport qs from 'qs'\n\nimport Home from './Home'\nclass Signup extends React.Component {\n  state = {\n    //message: null\n\n  };\n\n\n  handleChange = e => {\n    this.setState({ [e.target.id]: e.target.value });\n  };\n    setCookie(key, value) {\n        const d = new Date();\n        d.setTime(d.getTime() + (30 * 24 * 60 * 60 * 1000));\n        const expires = \"expires=\" + d.toGMTString();\n        document.cookie = key + \"=\" + value + \"; \" + expires;\n    }\n  // handleSubmit = event => {\n  //   event.preventDefault();\n  //\n  //   let url = \"http://localhost:8080/auth/login\";\n  //   axios.post(url, qs.stringify(this.state))\n  //       .then(res=>\n  //           res.data.username ? console.log(res.data)\n  //                   // this.setCookie(\"profile\", res.data)\n  //               :\n  //           this.setState({\n  //           message: \"wrong password\"\n  //       }\n  //   ))\n  //\n  //       // .then(res=> console.log(this.state.message[0].lastName))\n  // .catch(function (error) {\n  //   alert(\"WRONG\")\n  // });\n  // }\n    getCookie(key) {\n        const name = key + \"=\";\n        const ca = document.cookie.split(';');\n        for (let i = 0; i < ca.length; i++) {\n            const c = ca[i].trim();\n            if (c.indexOf(name) === 0) {\n                return c.substring(name.length, c.length);\n            }\n        }\n        return \"\";\n    }\n    handleSubmit = event => {\n        event.preventDefault();\n\n        let url = \"http://localhost:8080/auth/login\";\n        axios.post(url, qs.stringify(this.state),{withCredentials:true})\n            .then(res=> res.data ? this.setCookie(\"user\",res.data.username)\n                    : this.setState({message: \"wrong password\"}\n                    ))\n\n            .then(console.log(this.getCookie(\"user\") ))\n            .then(this.getCookie(\"user\")? this.props.history.push(\"/\"): {})\n\n            .catch(function (error) {\n                alert(\"WRONG\")\n            });\n    };\n\n    // googleLogin(){\n    //     axios.get(\"http://localhost:8080/auth/google\",{withCredentials:true})\n    //         .then(res=>this.setCookie(\"user\", res.data.username))\n    //         .then(this.props.history.push(\"/\"))\n    // }\n\n    render () {\n        return(\n            <body className=\"text-center\">\n            <form className=\"form-signin\" onSubmit={this.handleSubmit}>\n                <p style={{backgroundColor: \"red\"}}>{this.state.message}</p>\n                {/*<img className=\"mb-4\" src=\"/docs/4.3/assets/brand/bootstrap-solid.svg\" alt=\"\" width=\"72\" height=\"72\" />*/}\n                    <h1 className=\"h3 mb-3 font-weight-normal\">Please sign in with Email or Username</h1>\n\n                    <label htmlFor=\"inputUsername\" className=\"sr-only\">Username</label>\n                <br/>\n                    <input type=\"text\" id=\"inputUsername\" id=\"username\" className=\"form-control\" placeholder=\"Username\" onChange={this.handleChange}\n                           />\n                <br/>\n                        <label htmlFor=\"inputPassword\" className=\"sr-only\">Password</label>\n                <br/>\n                        <input type=\"password\" id=\"inputPassword\" id=\"password\" className=\"form-control\" placeholder=\"Password\" onChange={this.handleChange}\n                               required />\n                            <div className=\"checkbox mb-3\">\n                                <label>\n                                    {/*<input type=\"checkbox\" value=\"remember-me\"> Remember me</input>*/}\n                                </label>\n                            </div>\n                <br/>\n                <a href=\"http://localhost:3000/\">  <button className=\"btn btn-lg btn-primary btn-block\" type=\"submit\">Sign in</button></a>\n                <br/>\n                <a href=\"http://localhost:8080/auth/google\" >Login with your google account</a>\n                            <p className=\"mt-5 mb-3 text-muted\">&copy; 2019-9012</p>\n\n            </form>\n            </body>\n        )\n    }\n}\n\n\nexport default Signup"]},"metadata":{},"sourceType":"module"}